<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Posto | Authentic Wood Fired Experience</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <!-- Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#0f0f0f',
                            charcoal: '#1a1a1a',
                            fire: '#e25822',
                            gold: '#d4af37',
                            cream: '#f3f3f3'
                        }
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Inter"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.05%22/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Reset & Utilities */
        body {
            background-color: #0f0f0f;
            color: #f3f3f3;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Custom Cursor (Desktop Only) */
        @media (hover: hover) and (pointer: fine) {
            .cursor-dot,
            .cursor-outline {
                position: fixed;
                top: 0;
                left: 0;
                transform: translate(-50%, -50%);
                border-radius: 50%;
                z-index: 9999;
                pointer-events: none;
            }
            .cursor-dot {
                width: 8px;
                height: 8px;
                background-color: #e25822;
            }
            .cursor-outline {
                width: 40px;
                height: 40px;
                border: 1px solid rgba(255, 255, 255, 0.5);
                transition: width 0.2s, height 0.2s, background-color 0.2s;
            }
            /* Hover States */
            body.hover-active .cursor-outline {
                width: 60px;
                height: 60px;
                background-color: rgba(226, 88, 34, 0.1);
                border-color: #e25822;
                mix-blend-mode: exclusion;
            }
        }
        
        /* Mobile handling for cursor */
        @media (hover: none) {
            .cursor-dot, .cursor-outline { display: none; }
        }

        /* Utility: Hide Scrollbar when nav open */
        body.nav-open {
            overflow: hidden;
        }

        /* Loader Styles */
        .loader-wrap {
            position: fixed;
            inset: 0;
            z-index: 10000;
            background: #0f0f0f;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .loader-text {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
        }

        /* Image Masking for Reveal */
        .reveal-img-container {
            overflow: hidden;
        }
        .reveal-img {
            transform: scale(1.3);
            will-change: transform;
        }

        /* Noise Texture */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9000;
            background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.8%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.07%22/%3E%3C/svg%3E');
        }
    </style>
</head>
<body class="relative">

    <!-- Noise Texture -->
    <div class="noise-overlay"></div>

    <!-- Custom Cursor Elements -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <!-- LOADER -->
    <div class="loader-wrap">
        <div class="flex flex-col items-center">
            <h1 class="loader-text font-serif text-4xl md:text-6xl text-brand-fire italic transform translate-y-full">Pizza Posto</h1>
            <div class="loader-line w-0 h-[1px] bg-white mt-4 opacity-50"></div>
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav class="fixed top-0 left-0 w-full z-50 px-6 py-6 md:px-12 md:py-8 flex justify-between items-center mix-blend-difference text-white transition-all duration-300" id="main-nav">
        <!-- Logo -->
        <a href="#" class="text-2xl font-serif font-bold tracking-tight z-50 relative hover-trigger">
            Pizza Posto<span class="text-brand-fire">.</span>
        </a>

        <!-- Desktop Menu -->
        <div class="hidden md:flex gap-8 items-center">
            <a href="#story" class="hover-trigger text-sm uppercase tracking-widest hover:text-brand-fire transition-colors">Our Story</a>
            <a href="#menu" class="hover-trigger text-sm uppercase tracking-widest hover:text-brand-fire transition-colors">Menu</a>
            <a href="#reservations" class="hover-trigger border border-white/30 px-6 py-2 rounded-full text-sm uppercase tracking-widest hover:bg-white hover:text-black transition-all">Book Table</a>
        </div>

        <!-- Mobile Menu Toggle -->
        <button id="menu-toggle" class="md:hidden z-50 flex flex-col gap-1.5 w-8 hover-trigger group" aria-label="Toggle Menu">
            <span class="w-full h-[2px] bg-white group-hover:bg-brand-fire transition-colors duration-300 origin-right burger-line-1"></span>
            <span class="w-2/3 h-[2px] bg-white group-hover:bg-brand-fire transition-colors duration-300 ml-auto burger-line-2"></span>
        </button>
    </nav>

    <!-- MOBILE NAVIGATION OVERLAY -->
    <div id="mobile-nav-overlay" class="fixed inset-0 bg-brand-charcoal z-40 transform translate-x-full flex items-center justify-center pointer-events-none">
        <div class="flex flex-col items-center gap-8" id="mobile-nav-content">
            <!-- Note: opacity-0 and translate-y-8 are initial states for GSAP animation -->
            <a href="#story" class="mobile-link text-4xl font-serif italic text-white hover:text-brand-fire transition-colors opacity-0 translate-y-8">Our Story</a>
            <a href="#menu" class="mobile-link text-4xl font-serif italic text-white hover:text-brand-fire transition-colors opacity-0 translate-y-8">The Menu</a>
            <a href="#reservations" class="mobile-link text-4xl font-serif italic text-white hover:text-brand-fire transition-colors opacity-0 translate-y-8">Reservations</a>
            <div class="w-12 h-[1px] bg-white/20 my-4 mobile-link opacity-0 translate-y-8"></div>
            <p class="text-white/60 font-sans text-sm mobile-link opacity-0 translate-y-8">Via Roma, 24, Milano</p>
        </div>
    </div>

    <!-- HERO SECTION -->
    <section class="relative w-full h-screen overflow-hidden flex items-center justify-center">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1579751626657-72bc17010498?q=80&w=2669&auto=format&fit=crop')] bg-cover bg-center"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-brand-dark"></div>

        <!-- Ember Canvas -->
        <canvas id="ember-canvas" class="absolute inset-0 pointer-events-none opacity-80"></canvas>

        <!-- Content -->
        <div class="relative z-10 text-center px-4 max-w-4xl mx-auto mt-16">
            <p class="hero-anim text-brand-gold uppercase tracking-[0.2em] text-xs md:text-sm mb-4 md:mb-6 font-sans font-medium">Est. 2014 • Milano, Italy</p>
            <h1 class="hero-anim font-serif text-5xl md:text-8xl lg:text-9xl text-white leading-[0.9] md:leading-[0.9] mb-6 md:mb-8">
                Wood Fired <br>
                <span class="italic text-brand-fire">Soul</span>
            </h1>
            <p class="hero-anim text-white/80 font-sans text-sm md:text-lg max-w-lg mx-auto leading-relaxed mb-10">
                Traditional Neapolitan pizza, crafted with patience, fire, and the finest ingredients from the Amalfi coast.
            </p>
            <div class="hero-anim">
                <a href="#menu" class="hover-trigger inline-block bg-brand-fire text-white px-8 py-4 rounded-full font-sans text-sm font-semibold tracking-wide hover:bg-white hover:text-brand-fire transition-all transform hover:scale-105 shadow-lg shadow-brand-fire/20">
                    View Menu
                </a>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-2 opacity-60 animate-bounce">
            <span class="text-[10px] uppercase tracking-widest text-white">Scroll</span>
            <i data-lucide="arrow-down" class="w-4 h-4 text-white"></i>
        </div>
    </section>

    <!-- STORY SECTION -->
    <section id="story" class="relative py-20 md:py-32 bg-brand-dark overflow-hidden">
        <div class="container mx-auto px-6 md:px-12">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center">
                <!-- Image Grid -->
                <div class="relative grid grid-cols-2 gap-4 reveal-block">
                    <div class="reveal-img-container rounded-sm overflow-hidden pt-12">
                        <img src="https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?q=80&w=2670&auto=format&fit=crop" alt="Pizza Chef" class="reveal-img w-full h-[300px] object-cover opacity-90">
                    </div>
                    <div class="reveal-img-container rounded-sm overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2670&auto=format&fit=crop" alt="Restaurant Interior" class="reveal-img w-full h-[300px] object-cover opacity-90">
                    </div>
                </div>

                <!-- Text Content -->
                <div class="reveal-text flex flex-col gap-6">
                    <div class="w-12 h-[2px] bg-brand-fire mb-2"></div>
                    <h2 class="font-serif text-4xl md:text-6xl text-white leading-tight">
                        Not just pizza. <br>
                        <span class="italic text-white/60">A Ritual.</span>
                    </h2>
                    <p class="font-sans text-white/70 leading-relaxed text-base md:text-lg">
                        We don't believe in shortcuts. Our dough rests for 48 hours. Our San Marzano tomatoes are crushed by hand. Our oven burns at 480°C, fueled by Italian oak.
                    </p>
                    <p class="font-sans text-white/70 leading-relaxed text-base md:text-lg">
                        At Pizza Posto, we honor the traditions of Naples while embracing the energy of modern dining. Every pie tells a story of heat, flour, and passion.
                    </p>
                    <div class="pt-4">
                        <a href="#reservations" class="hover-trigger text-brand-gold border-b border-brand-gold/30 pb-1 hover:text-white hover:border-white transition-colors text-sm uppercase tracking-widest">
                            Read Our History
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- MENU SECTION -->
    <section id="menu" class="relative py-20 md:py-32 bg-brand-charcoal">
        <div class="container mx-auto px-6 md:px-12">
            <!-- Header -->
            <div class="text-center mb-16 md:mb-24 reveal-block">
                <span class="text-brand-fire text-sm uppercase tracking-[0.2em] font-medium">Selected Favorites</span>
                <h2 class="font-serif text-4xl md:text-6xl text-white mt-4">The Menu</h2>
            </div>

            <!-- Menu Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-6 lg:gap-8">
                
                <!-- Item 1 -->
                <div class="menu-card group relative bg-brand-dark p-4 pb-8 rounded-lg overflow-hidden hover-trigger">
                    <div class="aspect-[4/3] overflow-hidden rounded mb-6 relative">
                        <img src="https://images.unsplash.com/photo-1574071318508-1cdbab80d002?q=80&w=2669&auto=format&fit=crop" alt="Margherita" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out">
                        <div class="absolute top-4 right-4 bg-white text-black font-bold font-sans text-xs px-2 py-1 rounded">€12</div>
                    </div>
                    <div class="px-2">
                        <h3 class="font-serif text-2xl text-white mb-2 group-hover:text-brand-fire transition-colors">Margherita D.O.P</h3>
                        <p class="font-sans text-white/60 text-sm leading-relaxed mb-6">San Marzano tomato, buffalo mozzarella, fresh basil, extra virgin olive oil.</p>
                        <button class="w-full border border-white/20 py-3 rounded text-sm uppercase tracking-widest text-white hover:bg-brand-fire hover:border-brand-fire hover:text-white transition-colors" aria-label="Add Margherita to order">
                            Add to Order
                        </button>
                    </div>
                </div>

                <!-- Item 2 -->
                <div class="menu-card group relative bg-brand-dark p-4 pb-8 rounded-lg overflow-hidden hover-trigger">
                    <div class="aspect-[4/3] overflow-hidden rounded mb-6 relative">
                        <img src="https://images.unsplash.com/photo-1628840042765-356cda07504e?q=80&w=2080&auto=format&fit=crop" alt="Diavola" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out">
                        <div class="absolute top-4 right-4 bg-white text-black font-bold font-sans text-xs px-2 py-1 rounded">€15</div>
                    </div>
                    <div class="px-2">
                        <h3 class="font-serif text-2xl text-white mb-2 group-hover:text-brand-fire transition-colors">Diavola</h3>
                        <p class="font-sans text-white/60 text-sm leading-relaxed mb-6">Tomato sauce, fior di latte, spicy salami from Calabria, chili oil, basil.</p>
                        <button class="w-full border border-white/20 py-3 rounded text-sm uppercase tracking-widest text-white hover:bg-brand-fire hover:border-brand-fire hover:text-white transition-colors" aria-label="Add Diavola to order">
                            Add to Order
                        </button>
                    </div>
                </div>

                <!-- Item 3 -->
                <div class="menu-card group relative bg-brand-dark p-4 pb-8 rounded-lg overflow-hidden hover-trigger">
                    <div class="aspect-[4/3] overflow-hidden rounded mb-6 relative">
                        <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=2670&auto=format&fit=crop" alt="Tartufo" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-out">
                        <div class="absolute top-4 right-4 bg-white text-black font-bold font-sans text-xs px-2 py-1 rounded">€18</div>
                    </div>
                    <div class="px-2">
                        <h3 class="font-serif text-2xl text-white mb-2 group-hover:text-brand-fire transition-colors">Tartufo</h3>
                        <p class="font-sans text-white/60 text-sm leading-relaxed mb-6">White base, wild mushrooms, truffle cream, thyme, parmesan shavings.</p>
                        <button class="w-full border border-white/20 py-3 rounded text-sm uppercase tracking-widest text-white hover:bg-brand-fire hover:border-brand-fire hover:text-white transition-colors" aria-label="Add Tartufo to order">
                            Add to Order
                        </button>
                    </div>
                </div>

            </div>
            
            <div class="mt-16 text-center">
                <a href="#" class="inline-block text-brand-gold border-b border-brand-gold/30 pb-1 hover:text-white hover:border-white transition-colors text-sm uppercase tracking-widest">
                    Download Full Menu (PDF)
                </a>
            </div>
        </div>
    </section>

    <!-- PARALLAX / BREAK SECTION -->
    <section class="relative h-[60vh] md:h-[70vh] flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 bg-brand-dark">
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1590947132387-155cc02f3212?q=80&w=2670&auto=format&fit=crop')] bg-cover bg-center bg-fixed opacity-40 grayscale"></div>
            <div class="absolute inset-0 bg-black/50"></div>
        </div>
        <div class="relative z-10 text-center px-4">
            <p class="text-3xl md:text-5xl lg:text-6xl font-serif italic text-white leading-tight">
                "Best Pizza in the City"
            </p>
            <p class="mt-4 text-brand-gold uppercase tracking-widest text-xs md:text-sm font-sans">
                — Milano Food Guide, 2024
            </p>
        </div>
    </section>

    <!-- RESERVATIONS -->
    <section id="reservations" class="py-20 md:py-32 bg-brand-dark relative">
        <div class="container mx-auto px-6 md:px-12 max-w-5xl">
            <div class="bg-brand-charcoal p-8 md:p-16 rounded-xl relative overflow-hidden">
                <!-- Decorative Circle -->
                <div class="absolute -top-20 -right-20 w-64 h-64 bg-brand-fire opacity-5 rounded-full blur-3xl"></div>

                <div class="text-center mb-12">
                    <h2 class="font-serif text-3xl md:text-5xl text-white mb-4">Book a Table</h2>
                    <p class="text-white/60 font-sans">Reserve your spot for an unforgettable evening.</p>
                </div>

                <form class="grid grid-cols-1 md:grid-cols-2 gap-6 relative z-10">
                    <div class="flex flex-col gap-2">
                        <label class="text-xs uppercase tracking-widest text-white/50">Name</label>
                        <input type="text" class="bg-brand-dark border border-white/10 rounded p-4 text-white focus:outline-none focus:border-brand-fire transition-colors" placeholder="John Doe">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-xs uppercase tracking-widest text-white/50">Phone</label>
                        <input type="tel" class="bg-brand-dark border border-white/10 rounded p-4 text-white focus:outline-none focus:border-brand-fire transition-colors" placeholder="+39 ...">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-xs uppercase tracking-widest text-white/50">Date</label>
                        <input type="date" class="bg-brand-dark border border-white/10 rounded p-4 text-white focus:outline-none focus:border-brand-fire transition-colors text-white/70">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-xs uppercase tracking-widest text-white/50">Guests</label>
                        <select class="bg-brand-dark border border-white/10 rounded p-4 text-white focus:outline-none focus:border-brand-fire transition-colors appearance-none cursor-pointer">
                            <option>2 People</option>
                            <option>3 People</option>
                            <option>4 People</option>
                            <option>5+ People</option>
                        </select>
                    </div>
                    <div class="md:col-span-2 mt-4">
                        <button type="button" class="w-full bg-white text-brand-dark font-sans font-bold uppercase tracking-widest py-4 rounded hover:bg-brand-fire hover:text-white transition-colors duration-300 hover-trigger">
                            Confirm Reservation
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-brand-charcoal pt-20 pb-10 border-t border-white/5">
        <div class="container mx-auto px-6 md:px-12 flex flex-col md:flex-row justify-between gap-12">
            <div class="flex flex-col gap-4">
                <a href="#" class="text-2xl font-serif font-bold text-white">Pizza Posto<span class="text-brand-fire">.</span></a>
                <p class="text-white/40 text-sm max-w-xs leading-relaxed">
                    Authentic wood-fired pizza in the heart of Milano. <br>
                    Crafted with passion since 2014.
                </p>
                <div class="flex gap-4 mt-2">
                    <a href="#" class="text-white/60 hover:text-brand-fire hover-trigger"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    <a href="#" class="text-white/60 hover:text-brand-fire hover-trigger"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                    <a href="#" class="text-white/60 hover:text-brand-fire hover-trigger"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-12 text-sm font-sans">
                <div>
                    <h4 class="text-white uppercase tracking-widest mb-4">Visit</h4>
                    <p class="text-white/60 leading-loose">
                        Via Roma, 24 <br>
                        20121 Milano, Italy <br>
                        +39 02 1234 5678
                    </p>
                </div>
                <div>
                    <h4 class="text-white uppercase tracking-widest mb-4">Hours</h4>
                    <p class="text-white/60 leading-loose">
                        Mon - Thu: 18:00 - 23:00 <br>
                        Fri - Sat: 18:00 - 00:00 <br>
                        Sun: Closed
                    </p>
                </div>
            </div>
        </div>
        <div class="container mx-auto px-6 md:px-12 mt-20 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center text-xs text-white/30 font-sans">
            <p>&copy; 2025 Pizza Posto. All rights reserved.</p>
            <p>Designed for Excellence.</p>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Register GSAP Plugins
        gsap.registerPlugin(ScrollTrigger);

        // --- CUSTOM CURSOR (Desktop Only) ---
        const initCursor = () => {
            const cursorDot = document.querySelector('.cursor-dot');
            const cursorOutline = document.querySelector('.cursor-outline');
            const hoverTriggers = document.querySelectorAll('.hover-trigger');

            // Quick exit if touch device or reduced motion
            if (window.matchMedia("(pointer: coarse)").matches) return;

            window.addEventListener('mousemove', (e) => {
                const posX = e.clientX;
                const posY = e.clientY;

                // Dot follows instantly
                cursorDot.style.left = `${posX}px`;
                cursorDot.style.top = `${posY}px`;

                // Outline follows with slight delay using animate
                cursorOutline.animate({
                    left: `${posX}px`,
                    top: `${posY}px`
                }, { duration: 500, fill: "forwards" });
            });

            // Hover Effects
            hoverTriggers.forEach(link => {
                link.addEventListener('mouseenter', () => document.body.classList.add('hover-active'));
                link.addEventListener('mouseleave', () => document.body.classList.remove('hover-active'));
            });
        };

        // --- LOADER ---
        const initLoader = () => {
            const tl = gsap.timeline();

            tl.to('.loader-text', {
                y: 0,
                duration: 1,
                ease: 'power4.out',
                delay: 0.2
            })
            .to('.loader-line', {
                width: '150px',
                opacity: 1,
                duration: 0.8,
                ease: 'power2.inOut'
            })
            .to('.loader-text, .loader-line', {
                y: -100,
                opacity: 0,
                duration: 0.8,
                delay: 0.3,
                ease: 'power3.in'
            })
            .to('.loader-wrap', {
                yPercent: -100,
                duration: 1,
                ease: 'power4.inOut'
            }, "-=0.4")
            .from('.hero-anim', {
                y: 50,
                opacity: 0,
                stagger: 0.1,
                duration: 1,
                ease: 'power3.out'
            }, "-=0.5");
        };

        // --- MOBILE NAV ---
        const initNav = () => {
            const toggle = document.getElementById('menu-toggle');
            const overlay = document.getElementById('mobile-nav-overlay');
            const links = document.querySelectorAll('.mobile-link');
            const body = document.body;
            let isOpen = false;

            toggle.addEventListener('click', () => {
                isOpen = !isOpen;
                
                // Burger Animation
                if(isOpen) {
                    gsap.to('.burger-line-1', { rotation: 45, y: 5, width: '100%' });
                    gsap.to('.burger-line-2', { rotation: -45, y: -4, width: '100%' });
                    
                    // Open Overlay
                    gsap.to(overlay, { 
                        x: '0%', 
                        duration: 0.6, 
                        ease: 'power4.inOut',
                        pointerEvents: 'auto'
                    });
                    
                    // Stagger Links
                    gsap.to(links, {
                        y: 0,
                        opacity: 1,
                        stagger: 0.1,
                        delay: 0.3,
                        duration: 0.5
                    });

                    body.classList.add('nav-open');
                } else {
                    // Close Burger
                    gsap.to('.burger-line-1', { rotation: 0, y: 0 });
                    gsap.to('.burger-line-2', { rotation: 0, y: 0, width: '66%' });

                    // Close Overlay (animate links out first)
                    gsap.to(links, { y: 8, opacity: 0, duration: 0.3 });
                    gsap.to(overlay, { 
                        x: '100%', 
                        duration: 0.6, 
                        ease: 'power4.inOut',
                        delay: 0.1,
                        pointerEvents: 'none'
                    });

                    body.classList.remove('nav-open');
                }
            });

            // Close menu when clicking a link
            links.forEach(link => {
                link.addEventListener('click', () => {
                    if(isOpen) toggle.click();
                });
            });
        };

        // --- SCROLL ANIMATIONS ---
        const initScrollAnimations = () => {
            // Image Reveals in Story
            const revealContainers = document.querySelectorAll('.reveal-img-container');
            
            revealContainers.forEach(container => {
                const img = container.querySelector('img');
                
                gsap.to(img, {
                    scale: 1,
                    scrollTrigger: {
                        trigger: container,
                        start: "top 80%",
                        end: "bottom 20%",
                        scrub: 1
                    }
                });
            });

            // Text Reveals
            gsap.from('.reveal-text > *', {
                y: 30,
                opacity: 0,
                stagger: 0.1,
                duration: 1,
                scrollTrigger: {
                    trigger: '.reveal-text',
                    start: "top 75%"
                }
            });

            // Menu Cards Stagger
            gsap.from('.menu-card', {
                y: 50,
                opacity: 0,
                stagger: 0.1,
                duration: 0.8,
                scrollTrigger: {
                    trigger: '#menu',
                    start: "top 70%"
                }
            });
        };

        // --- FIRE/EMBER CANVAS ---
        const initCanvas = () => {
            const canvas = document.getElementById('ember-canvas');
            const ctx = canvas.getContext('2d');
            let width, height;
            let particles = [];
            
            // Reduce particle count on mobile for performance
            const isMobile = window.innerWidth < 768;
            const particleCount = isMobile ? 30 : 70;

            function resize() {
                width = canvas.width = window.innerWidth;
                height = canvas.height = window.innerHeight;
            }

            class Particle {
                constructor() {
                    this.reset();
                }

                reset() {
                    this.x = Math.random() * width;
                    this.y = height + Math.random() * 100;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = -(Math.random() * 1 + 0.5); // Upward speed
                    this.size = Math.random() * 2 + 1;
                    this.alpha = Math.random() * 0.5 + 0.1;
                    this.fade = Math.random() * 0.005 + 0.002;
                    this.color = Math.random() > 0.5 ? '226, 88, 34' : '212, 175, 55'; // Fire or Gold
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.alpha -= this.fade;

                    // Wobble effect
                    this.x += Math.sin(this.y * 0.01) * 0.2;

                    if (this.alpha <= 0 || this.y < -10) {
                        this.reset();
                    }
                }

                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${this.color}, ${this.alpha})`;
                    ctx.fill();
                }
            }

            function initParticles() {
                particles = [];
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle());
                }
            }

            function animate() {
                ctx.clearRect(0, 0, width, height);
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });
                requestAnimationFrame(animate);
            }

            window.addEventListener('resize', () => {
                resize();
                initParticles();
            });

            resize();
            initParticles();
            animate();
        };

        // --- MASTER INIT ---
        window.addEventListener('load', () => {
            initLoader();
            initNav();
            initCursor();
            initScrollAnimations();
            initCanvas();

            // Parallax Header on Scroll
            gsap.to('#main-nav', {
                backgroundColor: '#1a1a1a',
                paddingTop: '1rem',
                paddingBottom: '1rem',
                scrollTrigger: {
                    trigger: 'body',
                    start: "top -50",
                    toggleActions: "play none none reverse"
                }
            });
        });

    </script>
</body>
</html>
